<rolltemplate class="sheet-rolltemplate-atkdmg">
    {{#attack}}
    <div class="container atk">
        <div class="result">
            {{#always}}
            <div class="adv">
                <span>{{r1}}</span>
            </div>
            <div class="advspacer"></div>
            <div class="adv">
                <span>{{r2}}</span>
            </div>
            {{/always}}
            {{#normal}}
            <div class="solo">
                <span>{{r1}}</span>
            </div>
            {{/normal}}
            {{#advantage}}
            {{#rollLess() r1 r2}}
            <div class="adv">
                <span class="grey">{{r1}}</span>
            </div>
            <div class="advspacer"></div>
            <div class="adv">
                <span>{{r2}}</span>
            </div>
            {{/rollLess() r1 r2}}
            {{#rollTotal() r1 r2}}
            <div class="adv">
                <span>{{r1}}</span>
            </div>
            <div class="advspacer"></div>
            <div class="adv">
                <span>{{r2}}</span>
            </div>
            {{/rollTotal() r1 r2}}
            {{#rollGreater() r1 r2}}
            <div class="adv">
                <span>{{r1}}</span>
            </div>
            <div class="advspacer"></div>
            <div class="adv">
                <span class="grey">{{r2}}</span>
            </div>
            {{/rollGreater() r1 r2}}
            {{/advantage}}
            {{#disadvantage}}
            {{#rollLess() r1 r2}}
            <div class="adv">
                <span>{{r1}}</span>
            </div>
            <div class="advspacer"></div>
            <div class="adv">
                <span class="grey">{{r2}}</span>
            </div>
            {{/rollLess() r1 r2}}
            {{#rollTotal() r1 r2}}
            <div class="adv">
                <span>{{r1}}</span>
            </div>
            <div class="advspacer"></div>
            <div class="adv">
                <span>{{r2}}</span>
            </div>
            {{/rollTotal() r1 r2}}
            {{#rollGreater() r1 r2}}
            <div class="adv">
                <span class="grey">{{r1}}</span>
            </div>
            <div class="advspacer"></div>
            <div class="adv">
                <span>{{r2}}</span>
            </div>
            {{/rollGreater() r1 r2}}
            {{/disadvantage}}
        </div>
        {{#range}}
        <div class="sublabel">
            <span>{{range}}</span>
        </div>
        {{/range}}
        <div class="label">
            <span>{{rname}}{{#attack}} <span>({{mod}})</span>{{/attack}}</span>
        </div>
        {{#charname}}
        <div class="charname">
            <span>{{charname}}</span>
        </div>
        {{/charname}}
    </div>
    {{/attack}}
    {{#save}}
    {{#attack}}
    <div class="container desc save">
        {{/attack}}
        {{^attack}}
        <div class="container atk save">
            {{/attack}}
            <div class="savedc">
                <span class="rolltemplate-inline" data-i18n="difficulty-class-abv">DC</span><span class="rolltemplate-inline">{{savedc}}</span>
            </div>
            {{#savedesc}}
            <div class="sublabel">
                <span>{{savedesc}}</span>
            </div>
            {{/savedesc}}
            <div class="label">
                <span class="rolltemplate-inline">{{saveattr}}</span> <span class="rolltemplate-inline" data-i18n="save">Save</span>
            </div>
        </div>
        {{/save}}
        {{#desc}}
        <div class="desc">
            <span>{{desc}}</span>
        </div>
        {{/desc}}
        {{#hldmg}}
        {{#^rollTotal() hldmg 0}}
        <div class="desc">
            <span>{{hldmg}}</span>
            <span class="sublabel">{{dmg1type}}</span>
            <div class="label">
                <span data-i18n="higher-lvl-cast">Higher Level Cast</span>
            </div>
        </div>
        {{/^rollTotal() hldmg 0}}
        {{/hldmg}}
        {{#damage}}
        <div class="container damagetemplate">
            <div class="result">
                {{#dmg1flag}}
                {{^dmg2flag}}
                <div class="solo">
                                <span class="damage">
                                    {{dmg1}}
                                    {{#attack}}
                                        {{#normal}}
                                            {{#rollWasCrit() r1}}+ {{crit1}}{{/rollWasCrit() r1}}
                                        {{/normal}}
                                        {{#always}}
                                            {{#rollLess() r1 r2}}{{#rollWasCrit() r2}}+ {{crit1}}{{/rollWasCrit() r2}}{{/rollLess() r1 r2}}
                                            {{#rollTotal() r1 r2}}{{#rollWasCrit() r1}}+ {{crit1}}{{/rollWasCrit() r1}}{{/rollTotal() r1 r2}}
                                            {{#rollGreater() r1 r2}}{{#rollWasCrit() r1}}+ {{crit1}}{{/rollWasCrit() r1}}{{/rollGreater() r1 r2}}
                                        {{/always}}
                                        {{#advantage}}
                                            {{#rollLess() r1 r2}}{{#rollWasCrit() r2}}+ {{crit1}}{{/rollWasCrit() r2}}{{/rollLess() r1 r2}}
                                            {{#rollTotal() r1 r2}}{{#rollWasCrit() r1}}+ {{crit1}}{{/rollWasCrit() r1}}{{/rollTotal() r1 r2}}
                                            {{#rollGreater() r1 r2}}{{#rollWasCrit() r1}}+ {{crit1}}{{/rollWasCrit() r1}}{{/rollGreater() r1 r2}}
                                        {{/advantage}}
                                        {{#disadvantage}}
                                            {{#rollTotal() r1 r2}}{{#rollWasCrit() r1}}+ {{crit1}}{{/rollWasCrit() r1}}{{/rollTotal() r1 r2}}
                                        {{/disadvantage}}
                                    {{/attack}}
                                </span>
                    <span class="sublabel">{{dmg1type}}</span>
                </div>
                {{/dmg2flag}}
                {{/dmg1flag}}
                {{#dmg2flag}}
                {{^dmg1flag}}
                <div class="solo">
                                <span class="damage">
                                    {{dmg2}}
                                    {{#attack}}
                                        {{#normal}}
                                            {{#rollWasCrit() r1}}+ {{crit2}}{{/rollWasCrit() r1}}
                                        {{/normal}}
                                        {{#always}}
                                            {{#rollLess() r1 r2}}{{#rollWasCrit() r2}}+ {{crit2}}{{/rollWasCrit() r2}}{{/rollLess() r1 r2}}
                                            {{#rollTotal() r1 r2}}{{#rollWasCrit() r1}}+ {{crit2}}{{/rollWasCrit() r1}}{{/rollTotal() r1 r2}}
                                            {{#rollGreater() r1 r2}}{{#rollWasCrit() r1}}+ {{crit2}}{{/rollWasCrit() r1}}{{/rollGreater() r1 r2}}
                                        {{/always}}
                                        {{#advantage}}
                                            {{#rollLess() r1 r2}}{{#rollWasCrit() r2}}+ {{crit2}}{{/rollWasCrit() r2}}{{/rollLess() r1 r2}}
                                            {{#rollTotal() r1 r2}}{{#rollWasCrit() r1}}+ {{crit2}}{{/rollWasCrit() r1}}{{/rollTotal() r1 r2}}
                                            {{#rollGreater() r1 r2}}{{#rollWasCrit() r1}}+ {{crit2}}{{/rollWasCrit() r1}}{{/rollGreater() r1 r2}}
                                        {{/advantage}}
                                        {{#disadvantage}}
                                            {{#rollTotal() r1 r2}}{{#rollWasCrit() r1}}+ {{crit2}}{{/rollWasCrit() r1}}{{/rollTotal() r1 r2}}
                                        {{/disadvantage}}
                                    {{/attack}}
                                </span>
                    <span class="sublabel">{{dmg2type}}</span>
                </div>
                {{/dmg1flag}}
                {{/dmg2flag}}
                {{#dmg1flag}}
                {{#dmg2flag}}
                <div class="adv">
                                <span class="damage">
                                    {{dmg1}}
                                    {{#attack}}
                                        {{#normal}}
                                            {{#rollWasCrit() r1}}+ {{crit1}}{{/rollWasCrit() r1}}
                                        {{/normal}}
                                        {{#always}}
                                            {{#rollLess() r1 r2}}{{#rollWasCrit() r2}}+ {{crit1}}{{/rollWasCrit() r2}}{{/rollLess() r1 r2}}
                                            {{#rollTotal() r1 r2}}{{#rollWasCrit() r1}}+ {{crit1}}{{/rollWasCrit() r1}}{{/rollTotal() r1 r2}}
                                            {{#rollGreater() r1 r2}}{{#rollWasCrit() r1}}+ {{crit1}}{{/rollWasCrit() r1}}{{/rollGreater() r1 r2}}
                                        {{/always}}
                                        {{#advantage}}
                                            {{#rollLess() r1 r2}}{{#rollWasCrit() r2}}+ {{crit1}}{{/rollWasCrit() r2}}{{/rollLess() r1 r2}}
                                            {{#rollTotal() r1 r2}}{{#rollWasCrit() r1}}+ {{crit1}}{{/rollWasCrit() r1}}{{/rollTotal() r1 r2}}
                                            {{#rollGreater() r1 r2}}{{#rollWasCrit() r1}}+ {{crit1}}{{/rollWasCrit() r1}}{{/rollGreater() r1 r2}}
                                        {{/advantage}}
                                        {{#disadvantage}}
                                            {{#rollTotal() r1 r2}}{{#rollWasCrit() r1}}+ {{crit1}}{{/rollWasCrit() r1}}{{/rollTotal() r1 r2}}
                                        {{/disadvantage}}
                                    {{/attack}}
                                </span>
                    <span class="sublabel">{{dmg1type}}</span>
                </div>
                <div class="advspacer"></div>
                <div class="adv">
                                <span>
                                    {{dmg2}}
                                    {{#attack}}
                                        {{#normal}}
                                            {{#rollWasCrit() r1}}+ {{crit2}}{{/rollWasCrit() r1}}
                                        {{/normal}}
                                        {{#always}}
                                            {{#rollLess() r1 r2}}{{#rollWasCrit() r2}}+ {{crit2}}{{/rollWasCrit() r2}}{{/rollLess() r1 r2}}
                                            {{#rollTotal() r1 r2}}{{#rollWasCrit() r1}}+ {{crit2}}{{/rollWasCrit() r1}}{{/rollTotal() r1 r2}}
                                            {{#rollGreater() r1 r2}}{{#rollWasCrit() r1}}+ {{crit2}}{{/rollWasCrit() r1}}{{/rollGreater() r1 r2}}
                                        {{/always}}
                                        {{#advantage}}
                                            {{#rollLess() r1 r2}}{{#rollWasCrit() r2}}+ {{crit2}}{{/rollWasCrit() r2}}{{/rollLess() r1 r2}}
                                            {{#rollTotal() r1 r2}}{{#rollWasCrit() r1}}+ {{crit2}}{{/rollWasCrit() r1}}{{/rollTotal() r1 r2}}
                                            {{#rollGreater() r1 r2}}{{#rollWasCrit() r1}}+ {{crit2}}{{/rollWasCrit() r1}}{{/rollGreater() r1 r2}}
                                        {{/advantage}}
                                        {{#disadvantage}}
                                            {{#rollTotal() r1 r2}}{{#rollWasCrit() r1}}+ {{crit2}}{{/rollWasCrit() r1}}{{/rollTotal() r1 r2}}
                                        {{/disadvantage}}
                                    {{/attack}}
                                </span>
                    <span class="sublabel">{{dmg2type}}</span>
                </div>
                {{/dmg2flag}}
                {{/dmg1flag}}
            </div>
            {{^attack}}
            {{#range}}
            <div class="sublabel">
                <span>{{range}}</span>
            </div>
            {{/range}}
            <div class="label">
                <span>{{rname}}</span>
            </div>
            {{#charname}}
            <div class="charname">
                <span>{{charname}}</span>
            </div>
            {{/charname}}
            {{/attack}}
        </div>
        {{/damage}}
    </div>
</rolltemplate>